webpackJsonp([16],{FHnt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={components:{SystemItem:s("45w3").a},data:function(){return{currentKey:null,currentUserName:void 0,businessSystem:[],baseSystem:[],stateUser:void 0,stateUserId:void 0,treeProps:{label:"name",children:"children",isLeaf:"type"}}},watch:{stateUser:function(e){void 0!==e&&""!==e||(this.stateUserId=void 0)}},methods:{queryUser:function(e,t){this.stateUserId=void 0,this.$API.getUserList({name:e,per_page:10,page:1}).then(function(e){var s=e.result||{};t(s.data||[])})},handleSelectUser:function(e){this.stateUser=e.name,this.stateUserId=e.id},handleSearch:function(){void 0===this.stateUserId?this.$refs.inputRef.focus():(this.currentKey=null,this.currentUserName=this.stateUser,this.$refs.treeRef.setCurrentKey(null),this.requestList(this.stateUserId))},requestList:function(e){var t=this;this.$API.getUserSystem(e).then(function(e){var s=[],i=[];(e.result||[]).forEach(function(e){1===e.type?s.push(e):i.push(e)}),t.baseSystem=s,t.businessSystem=i})},onOrgTreeClick:function(e,t,s){e.type?(this.currentKey=e.id,this.currentUserName=e.name,this.requestList(e.id),this.$refs.treeRef.setCurrentKey(e.id)):this.$refs.treeRef.setCurrentKey(this.currentKey)},loadNode:function(e,t){this.$API.getOrgTree({department_id:e.data?e.data.id:void 0}).then(function(e){var s=e.result||[];s.forEach(function(e){e.type=!e.type}),t(s)})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-box"},[s("top-header",{attrs:{title:"用户权限审计"}}),e._v(" "),s("div",{staticClass:"page-container"},[s("div",{staticClass:"box-tree"},[s("strong",{staticClass:"box-title"},[e._v("组织架构")]),e._v(" "),s("div",{staticClass:"tree-wraper"},[s("div",{staticClass:"uzzy-search"},[s("el-autocomplete",{ref:"inputRef",attrs:{clearable:"","fetch-suggestions":e.queryUser,placeholder:"请输入员工姓名","trigger-on-focus":!1},on:{select:e.handleSelectUser},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[s("div",{staticClass:"name text-overflow-ellipsis",attrs:{title:i.name+"，"+i.department_name}},[e._v(e._s(i.name+"，"+i.department_name))])]}}]),model:{value:e.stateUser,callback:function(t){e.stateUser=t},expression:"stateUser"}},[s("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),s("div",{staticClass:"tree-box"},[s("el-tree",{ref:"treeRef",attrs:{"highlight-current":!0,props:e.treeProps,load:e.loadNode,"node-key":"id",lazy:""},on:{"node-click":e.onOrgTreeClick}})],1)])]),e._v(" "),s("div",{staticClass:"box-list"},[s("strong",{staticClass:"box-title"},[e._v("用户名称"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.currentUserName,expression:"currentUserName"}]},[e._v(e._s("-  "+e.currentUserName))])]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e.baseSystem&&e.baseSystem.length>0?s("div",[e._m(2),e._v(" "),s("div",{staticClass:"system-items"},e._l(e.baseSystem,function(e){return s("system-item",{key:e.id,attrs:{item:e}})}))]):e._e()])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"li-item"},[t("i"),t("span",{staticClass:"li-item-title"},[this._v("基本信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"li-item"},[t("i"),t("span",{staticClass:"li-item-title"},[this._v("联系方式")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"li-item"},[t("i"),t("span",{staticClass:"li-item-title"},[this._v("基本系统")])])}]};var a=s("vSla")(i,r,!1,function(e){s("GYAQ")},"data-v-1f51da12",null);t.default=a.exports},GYAQ:function(e,t){}});
//# sourceMappingURL=16.5549dd349665e3118635.js.map