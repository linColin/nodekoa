{"version":3,"sources":["webpack:///src/views/account-management/account-setup.vue","webpack:///./src/views/account-management/account-setup.vue?80bf","webpack:///./src/views/account-management/account-setup.vue"],"names":["account_setup","components","SystemItem","data","currentKey","currentUserName","undefined","businessSystem","baseSystem","stateUser","stateUserId","treeProps","label","children","isLeaf","watch","val","this","methods","queryUser","queryString","cb","$API","getUserList","name","per_page","page","then","res","result","handleSelectUser","item","id","handleSearch","$refs","inputRef","focus","treeRef","setCurrentKey","requestList","_this","getUserSystem","forEach","el","type","push","onOrgTreeClick","node","loadNode","resolve","getOrgTree","department_id","account_management_account_setup","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","ref","clearable","fetch-suggestions","placeholder","trigger-on-focus","on","select","scopedSlots","_u","key","fn","_s","model","value","callback","$$v","expression","slot","icon","size","click","highlight-current","props","load","node-key","lazy","node-click","directives","rawName","_m","length","_l","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.5549dd349665e3118635.js","sourcesContent":["<style lang=\"less\" scoped>\n\n  .page-container {\n    &:after {\n      display: block;\n      content: \"\";\n      font-size: 0;\n      clear: both;\n    }\n  }\n  .box-tree {\n    float: left;\n    width: 356px;\n  }\n  .box-list {\n    margin-left: 376px;\n  }\n  .box-title {\n    margin-bottom: 20px;\n    padding: 0 12px;\n    display: block;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    background-color: #f1f3f5;\n    span {\n      margin-left: 12px;\n      font-size: 12px;\n      color: #909399;\n    }\n  }\n  .tree-wraper {\n    padding: 20px;\n    border: 1px solid #DCDAE2;\n    border-radius: 4px;\n  }\n  .uzzy-search {\n    display: flex;\n    padding-bottom: 10px;\n    @{global} {\n      .el-button {\n        margin-left: 10px;\n      }\n      .el-autocomplete {\n        flex: 1;\n        .el-input__inner{\n          height: 32px;\n          line-height: 32px;\n          font-size: 12px;\n          padding: 0 10px;\n        }\n      }\n    }\n  }\n  .tree-box {\n    margin: 0 -14px 0 -6px;\n    overflow: auto;\n    height: calc(100vh - 230px);\n    @{global} .el-tree-node>.el-tree-node__children {\n      overflow: inherit;\n    }\n  }\n  .li-item {\n    margin-bottom: 15px;\n    i {\n      display: inline-block;\n      margin-right: 8px;\n      width: 8px;\n      height: 8px;\n      border-radius: 8px;\n      background-color: #333;\n    }\n    span {\n      display: inline-block;\n      margin-right: 10px;\n      color: #333;\n    }\n  }\n  .system-items {\n    margin: 12px -10px 10px -10px;\n    overflow: hidden;\n    .system-item {\n      float: left;\n      margin: 0 10px 12px 10px;\n    }\n  }\n</style>\n<template>\n  <div class=\"page-box\">\n    <top-header title=\"用户权限审计\"></top-header>\n    <div class=\"page-container\">\n      <div class=\"box-tree\">\n        <strong class=\"box-title\">组织架构</strong>\n        <div class=\"tree-wraper\">\n          <div class=\"uzzy-search\">\n            <el-autocomplete\n              ref=\"inputRef\"\n              clearable\n              :fetch-suggestions=\"queryUser\"\n              placeholder=\"请输入员工姓名\"\n              v-model=\"stateUser\"\n              :trigger-on-focus=\"false\"\n              @select=\"handleSelectUser\"\n            >\n              <i\n                class=\"el-icon-search el-input__icon\"\n                slot=\"suffix\">\n              </i>\n              <template slot-scope=\"{ item }\">\n                <div class=\"name text-overflow-ellipsis\" :title=\"`${item.name}，${item.department_name}`\">{{ `${item.name}，${item.department_name}` }}</div>\n              </template>\n            </el-autocomplete>\n            <el-button @click=\"handleSearch\" type=\"primary\" icon=\"el-icon-search\" size=\"small\">查询</el-button>\n          </div>\n          <div class=\"tree-box\">\n            <el-tree\n              ref=\"treeRef\"\n              :highlight-current=\"true\"\n              :props=\"treeProps\"\n              :load=\"loadNode\"\n              @node-click=\"onOrgTreeClick\"\n              node-key=\"id\"\n              lazy>\n            </el-tree>\n          </div>\n        </div>\n      </div>\n      <div class=\"box-list\">\n        <strong class=\"box-title\">用户名称<span v-show=\"currentUserName\">{{'-&nbsp;&nbsp;' + currentUserName}}</span></strong>\n        <div class=\"li-item\">\n          <i></i><span class=\"li-item-title\">基本信息</span>\n        </div>\n        <div class=\"li-item\">\n          <i></i><span class=\"li-item-title\">联系方式</span>\n        </div>\n        <div v-if=\"baseSystem && baseSystem.length > 0\">\n          <div class=\"li-item\">\n            <i></i><span class=\"li-item-title\">基本系统</span>\n          </div>\n          <div class=\"system-items\">\n            <system-item v-for=\"el in baseSystem\" :item=\"el\" :key=\"el.id\"> </system-item>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SystemItem from '@/components/system'\n\nexport default {\n  components: {\n    SystemItem\n  },\n  data () {\n    return {\n      // 树当前选中的员工\n      currentKey: null,\n      // 当前选择查询的用户\n      currentUserName: undefined,\n      // 业务系统\n      businessSystem: [],\n      // 基本系统\n      baseSystem: [],\n      // 查询的员工姓名\n      stateUser: undefined,\n      // 查询的员工ID\n      stateUserId: undefined,\n      treeProps: {\n        label: 'name',\n        children: 'children',\n        isLeaf: 'type'\n      }\n    }\n  },\n  watch: {\n    // 删除过滤信息\n    stateUser (val) {\n      if (val === undefined || val === '') {\n        this.stateUserId = undefined\n      }\n    }\n  },\n  methods: {\n    // 用户过滤查询\n    queryUser (queryString, cb) {\n      this.stateUserId = undefined\n      this.$API.getUserList({ name: queryString, per_page: 10, page: 1 }).then(res => {\n        let result = res.result || {}\n        cb(result.data || [])\n      })\n    },\n    // 选择过滤的员工\n    handleSelectUser (item) {\n      this.stateUser = item.name\n      this.stateUserId = item.id\n    },\n    // 搜索员工角色\n    handleSearch () {\n      if (this.stateUserId === undefined) {\n        this.$refs.inputRef.focus()\n      } else {\n        this.currentKey = null\n        this.currentUserName = this.stateUser\n        this.$refs.treeRef.setCurrentKey(null)\n        this.requestList(this.stateUserId)\n      }\n    },\n    // 获取权限列表数据\n    requestList (id) {\n      this.$API.getUserSystem(id).then(res => {\n        let result = res.result || []\n        let baseSystem = []\n        let businessSystem = []\n        result.forEach(el => {\n          if (el.type === 1) {\n            baseSystem.push(el)\n          } else {\n            businessSystem.push(el)\n          }\n        })\n        this.baseSystem = baseSystem\n        this.businessSystem = businessSystem\n      })\n    },\n    // 点击查询用户\n    onOrgTreeClick (data, node, el) {\n      if (data.type) {\n        this.currentKey = data.id\n        this.currentUserName = data.name\n        this.requestList(data.id)\n        this.$refs.treeRef.setCurrentKey(data.id)\n      } else {\n        this.$refs.treeRef.setCurrentKey(this.currentKey)\n      }\n    },\n    // 加载树\n    loadNode (node, resolve) {\n      this.$API.getOrgTree({ department_id: node.data ? node.data.id : undefined }).then(res => {\n        // type 0: 用户、 1：部门\n        let result = res.result || []\n        result.forEach((el) => {\n          el.type = !el.type\n        })\n        resolve(result)\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/account-management/account-setup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-box\"},[_c('top-header',{attrs:{\"title\":\"用户权限审计\"}}),_vm._v(\" \"),_c('div',{staticClass:\"page-container\"},[_c('div',{staticClass:\"box-tree\"},[_c('strong',{staticClass:\"box-title\"},[_vm._v(\"组织架构\")]),_vm._v(\" \"),_c('div',{staticClass:\"tree-wraper\"},[_c('div',{staticClass:\"uzzy-search\"},[_c('el-autocomplete',{ref:\"inputRef\",attrs:{\"clearable\":\"\",\"fetch-suggestions\":_vm.queryUser,\"placeholder\":\"请输入员工姓名\",\"trigger-on-focus\":false},on:{\"select\":_vm.handleSelectUser},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"name text-overflow-ellipsis\",attrs:{\"title\":((item.name) + \"，\" + (item.department_name))}},[_vm._v(_vm._s(((item.name) + \"，\" + (item.department_name))))])]}}]),model:{value:(_vm.stateUser),callback:function ($$v) {_vm.stateUser=$$v},expression:\"stateUser\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"small\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"tree-box\"},[_c('el-tree',{ref:\"treeRef\",attrs:{\"highlight-current\":true,\"props\":_vm.treeProps,\"load\":_vm.loadNode,\"node-key\":\"id\",\"lazy\":\"\"},on:{\"node-click\":_vm.onOrgTreeClick}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"box-list\"},[_c('strong',{staticClass:\"box-title\"},[_vm._v(\"用户名称\"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentUserName),expression:\"currentUserName\"}]},[_vm._v(_vm._s('-  ' + _vm.currentUserName))])]),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),(_vm.baseSystem && _vm.baseSystem.length > 0)?_c('div',[_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"system-items\"},_vm._l((_vm.baseSystem),function(el){return _c('system-item',{key:el.id,attrs:{\"item\":el}})}))]):_vm._e()])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"基本信息\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"联系方式\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"基本系统\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-1f51da12\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/account-management/account-setup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f51da12\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/lintaohai/workspace/urm-white/src/assets/style/variable.less\\\"]}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./account-setup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./account-setup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./account-setup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f51da12\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./account-setup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f51da12\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/account-management/account-setup.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}