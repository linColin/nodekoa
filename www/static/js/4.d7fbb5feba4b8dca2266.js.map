{"version":3,"sources":["webpack:///src/views/authority/role/index.vue","webpack:///./src/views/authority/role/index.vue?5343","webpack:///./src/views/authority/role/index.vue","webpack:///src/views/authority/detail.vue","webpack:///./src/views/authority/detail.vue?7ff8","webpack:///./src/views/authority/detail.vue"],"names":["role","components","TopHeader","header","KyeDialog","dialog","SystemItem","system","roleDetail","detail","data","filterText","defaultProps","children","label","orgs","stateSystem","undefined","stateUser","kyeDialog","hasDialog","title","hasDetail","isShowFilterTree","departmentName","page","total","size","current","sizes","filterCondition","name","department_name","status","roleStatus","id","tableData","item","type","department_id","associated_system","associated_user","rules","required","message","trigger","w","x","y","computed","userInfo","this","$store","state","roleTypes","isAuthoritySystemRole","findIndex","el","isEdit","watch","val","$refs","tree","filter","oldVal","methods","filterNode","value","indexOf","isBuiltInRole","isSectionRole","handleSearch","requestList","_this","params","extends_default","per_page","api","getRoleList","then","res","result","pagination","total_count","requestDepartmentTree","_this2","getDepartmentTree","onAdd","resetForm","isShowDialog","onDetail","getRoleInfo","onEdit","_this3","getRole","bool","length","showDepartmentList","_$refs$treeParent$get","treeParent","getBoundingClientRect","height","width","onDepartmentBlur","handleNodeClick","node","handleSizeChange","handleCurrentChange","index","handleDelRole","_this4","$confirm","confirmButtonText","cancelButtonText","delRole","$message","handleDelUser","splice","handleDelSystem","querySystem","queryString","cb","searchSys","queryUser","getUserList","handleSelectSystem","push","handleSelectUser","submitForm","formName","_this5","validate","valid","options","map","putRole","addRole","resetFields","onBodyClick","e","beforeMount","authority_role","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","attrs","_v","clearable","placeholder","model","callback","$$v","$set","expression","_l","key","icon","staticStyle","scopedSlots","_u","fn","scope","_s","$index","prop","$event","row","style","color","_f","updated_at","_e","directives","rawName","background","page-sizes","layout","current-page","prev-text","next-text","size-change","current-change","update:currentPage","has-dialog","is-show-dialog","slot","ref","label-position","disabled","position","stopPropagation","display","readonly","suffix-icon","focus","blur","top","left","node-key","expand-on-click-node","props","filter-node-method","highlight-current","node-click","fetch-suggestions","trigger-on-focus","select","showClose","del-click","role-types","has-detail","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Object","Boolean","String","default","$emit","authority_detail","span"],"mappings":"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","file":"static/js/4.d7fbb5feba4b8dca2266.js","sourcesContent":["<style lang=\"less\" scoped>\n  .table-filters {\n    padding-bottom: 0;\n  }\n  .li-item {\n    margin-top: 10px;\n    i {\n      display: inline-block;\n      margin-right: 8px;\n      width: 8px;\n      height: 8px;\n      border-radius: 8px;\n      background-color: #333;\n    }\n    span {\n      display: inline-block;\n      margin-right: 10px;\n      color: #333;\n    }\n    @{global} {\n      .el-input__inner {\n        padding: 0 6px;\n        width: 200px;\n        height: 22px;\n        line-height: 22px;\n        font-size: 12px;\n        border: 1px solid #DADDE2;\n        border-radius: 4px;\n      }\n    }\n  }\n  .system-items {\n    margin: 12px -10px 0 -10px;\n    &:after {\n      content: \"\";\n      display: block;\n      clear: both;\n      font-size: 0;\n    }\n    .system-item {\n      float: left;\n      margin: 0 10px 12px 10px;\n    }\n  }\n  .dialog-table {\n    padding-top: 18px;\n  }\n  .filter-item {\n    position: relative;\n    width: 200px;\n  }\n  .filter-tree-wrap {\n    position: fixed;\n    top: 0;\n    left: 0;\n    padding: 7px;\n    max-height: 300px;\n    overflow: auto;\n  }\n  .filter-tree-box {\n    position: relative;\n    height: 270px;\n  }\n  .filter-tree-input-box {\n    position: relative;\n  }\n  .filter-tree-txt {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 32px;\n    line-height: 32px;\n    z-index: 1;\n  }\n  .page-box {\n    width: 100%;\n    height: 100%;\n    @{global} {\n      .el-form-item__content {\n        position: inherit;\n        line-height: inherit;\n        font-size: 12px;\n      }\n      .el-form-item {\n        margin-bottom: 0;\n        width: 100%;\n      }\n    }\n  }\n  .label-required:before {\n    content: '*';\n    color: #f56c6c;\n    margin-right: 4px;\n  }\n  .tree-wraper .el-autocomplete {\n    @{global} {\n      .el-input {\n        width: 100%;\n      }\n    }\n  }\n</style>\n<template>\n  <div class=\"page-box\" @click=\"onBodyClick\">\n    <top-header title=\"角色管理\">\n      <el-button type=\"text\" size=\"mini\" class=\"el-icon-plus\" @click=\"onAdd\"> 新增职能角色</el-button>\n    </top-header>\n    <div class=\"page-container\">\n      <div class=\"table-filters\">\n        <div class=\"filter-item\">\n          <p class=\"item\">角色名称</p>\n          <el-input v-model=\"filterCondition.name\"\n                    clearable\n                    size=\"small\"\n                    placeholder=\"请输入\"></el-input>\n        </div>\n        <div class=\"filter-item\">\n          <p class=\"item\">所属部门</p>\n          <el-input v-model=\"filterCondition.department_name\"\n                    clearable\n                    size=\"small\"\n                    placeholder=\"请输入\"></el-input>\n        </div>\n        <div class=\"filter-item\">\n          <p class=\"item\">角色状态</p>\n          <el-select\n            v-model=\"filterCondition.status\"\n            size=\"small\"\n            placeholder=\"请选择\">\n            <el-option label=\"不限\" :value=\"undefined\"></el-option>\n            <el-option v-for=\"(el, key) in roleStatus\"\n              :key=\"key\"\n              :label=\"el.name\"\n              :value=\"el.id\">\n            </el-option>\n          </el-select>\n        </div>\n        <div class='search-btn'>\n          <el-button type=\"primary\"\n            size=\"small\"\n            icon=\"el-icon-search\"\n            @click=\"handleSearch\">查询\n          </el-button>\n        </div>\n      </div>\n      <el-table\n        :data=\"tableData\"\n        size=\"mini\"\n        style=\"width: 100%\">\n        <el-table-column\n          type=\"index\"\n          label=\"序号\"\n          width=\"60\">\n          <template slot-scope=\"scope\">\n            {{(page.current - 1) * page.size + scope.$index + 1}}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"name\"\n          label=\"角色名称\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"onDetail(scope.row.id)\" size=\"mini\" type=\"text\">{{scope.row.name}}</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"type\"\n          label=\"角色类型\">\n          <template slot-scope=\"scope\">\n            {{roleTypes[scope.row.type]}}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"status\"\n          label=\"角色状态\">\n          <template slot-scope=\"scope\">\n            <span :style=\"{ color: scope.row.status == '1' ? '#00C353' : '#E96767' }\">\n              {{scope.row.status == '1' ? '已启用' : '已禁用'}}\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"department_name\"\n          label=\"所属部门\">\n        </el-table-column>\n        <el-table-column\n          prop=\"created_by\"\n          label=\"创建人\">\n        </el-table-column>\n        <el-table-column\n          prop=\"updated_by\"\n          label=\"角色修改人\">\n        </el-table-column>\n        <el-table-column\n          prop=\"updated_at\"\n          label=\"角色修改时间\"\n          width=\"125\">\n          <template slot-scope=\"scope\">\n            {{scope.row.updated_at | datetime}}\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          width=\"90\">\n          <template slot-scope=\"scope\">\n            <el-button v-if=\"isAuthoritySystemRole || !isBuiltInRole(scope.row.type)\" size=\"mini\" @click=\"onEdit(scope.row.id)\" type=\"text\">修改</el-button>\n            <el-button v-if=\"isAuthoritySystemRole && scope.row.type === 100\" size=\"mini\" @click=\"handleDelRole(scope.row.id)\" type=\"text\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        background\n        v-show=\"page.total > page.sizes[0]\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :page-sizes=\"page.sizes\"\n        layout=\"sizes,prev,pager,next\"\n        :current-page.sync=\"page.current\"\n        :total=\"page.total\"\n        prev-text=\"上一页\"\n        next-text='下一页'>\n      </el-pagination>\n    </div>\n    <kye-dialog @is-show-dialog=\"isShowDialog\" :has-dialog=\"!!kyeDialog.hasDialog\" :title=\"kyeDialog.title\">\n      <div slot=\"body\">\n        <el-form :model=\"item\" :rules=\"rules\" label-position=\"top\" ref=\"ruleForm\">\n          <div class=\"table-filters\">\n            <div class=\"filter-item\">\n              <p class=\"item label-required\">角色名称</p>\n              <el-form-item prop=\"name\">\n                <el-input v-model=\"item.name\"\n                        clearable\n                        size=\"small\"\n                        placeholder=\"请输入\"></el-input>\n              </el-form-item>\n            </div>\n            <div class=\"filter-item\">\n              <p class=\"item label-required\">角色状态</p>\n              <el-form-item prop=\"status\">\n                <el-select\n                  :disabled=\"isEdit && isBuiltInRole(item.type)\"\n                  v-model=\"item.status\"\n                  size=\"small\"\n                  placeholder=\"请选择\">\n                <el-option v-for=\"(el, key) in roleStatus\"\n                        :key=\"key\"\n                        :label=\"el.name\"\n                        :value=\"el.id\">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n            </div>\n            <div v-if=\"!isBuiltInRole(item.type)\" class=\"filter-item\" style=\"width: 410px;\">\n              <p class=\"item label-required\">所属部门</p>\n              <el-form-item prop=\"department_id\">\n                <div style=\"position: relative;width: 100%;\">\n                  <div class=\"filter-input-box\" ref=\"treeParent\" @click.stop=\"() => { return false }\">\n                    <el-input style=\"display: none;\" v-model=\"item.department_id\" type=\"hidden\"></el-input>\n                    <el-input\n                      @focus=\"showDepartmentList\"\n                      @blur=\"onDepartmentBlur\"\n                      ref=\"filterInput\"\n                      placeholder=\"输入关键字进行过滤\"\n                      size=\"small\"\n                      :clearable=\"!isEdit\"\n                      :readonly=\"isEdit\"\n                      :suffix-icon=\"isEdit ? null : 'el-icon-search'\"\n                      v-model=\"filterText\">\n                    </el-input>\n                  </div>\n                  <div :style=\"{ top: y + 'px', left: x + 'px', width: w + 'px' }\" v-show=\"!isEdit && isShowFilterTree\" class=\"filter-tree-w filter-tree-wrap el-select-dropdown el-popper\">\n                  <el-tree\n                    v-show=\"orgs && orgs.length > 0\"\n                    node-key=\"id\"\n                    :data=\"orgs\"\n                    :expand-on-click-node=\"true\"\n                    :props=\"defaultProps\"\n                    :filter-node-method=\"filterNode\"\n                    :highlight-current=\"true\"\n                    @node-click=\"handleNodeClick\"\n                    ref=\"tree\">\n                  </el-tree>\n                  </div>\n                </div>\n              </el-form-item>\n            </div>\n          </div>\n          <div v-if=\"!isEdit || !isBuiltInRole(item.type)\" class=\"li-item\">\n            <i></i><span class=\"li-item-title\">关联系统</span>\n            <el-autocomplete\n              :fetch-suggestions=\"querySystem\"\n              placeholder=\"输入选择即可添加关联系统\"\n              :trigger-on-focus=\"false\"\n              v-model=\"stateSystem\"\n              @select=\"handleSelectSystem\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div class=\"name text-overflow-ellipsis\">{{ item.name }}</div>\n              </template>\n            </el-autocomplete>\n          </div>\n          <div v-if=\"!isEdit || !isBuiltInRole(item.type)\" class=\"system-items\">\n            <system-item v-for=\"(el, index) in item.associated_system\" :showClose=\"!isEdit || !isBuiltInRole(item.type)\" :item=\"el\" @del-click=\"handleDelSystem(index)\" :key=\"el.id\"></system-item>\n          </div>\n          <div class=\"li-item\" v-show=\"!!this.item.department_id || isBuiltInRole(item.type)\">\n            <i></i><span class=\"li-item-title\">关联用户</span>\n            <el-autocomplete\n              v-if=\"!isEdit || !isSectionRole(item.type)\"\n              :fetch-suggestions=\"queryUser\"\n              placeholder=\"输入选择即可添加关联用户\"\n              v-model=\"stateUser\"\n              :trigger-on-focus=\"false\"\n              @select=\"handleSelectUser\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div class=\"name text-overflow-ellipsis\" :title=\"`${item.name}，${item.department_name}`\">{{ `${item.name}，${item.department_name}` }}</div>\n              </template>\n            </el-autocomplete>\n          </div>\n          <div class=\"dialog-table\" v-show=\"!!this.item.department_id || isBuiltInRole(item.type)\">\n            <el-table\n              :data=\"item.associated_user\"\n              size=\"mini\"\n              style=\"width: 100%\">\n              <el-table-column\n                type=\"index\"\n                label=\"序号\"\n                width=\"60\">\n              </el-table-column>\n              <el-table-column\n                prop=\"employee_code\"\n                label=\"工号\">\n              </el-table-column>\n              <el-table-column\n                prop=\"name\"\n                label=\"用户名\">\n              </el-table-column>\n              <el-table-column\n                v-if=\"!isEdit || !isSectionRole(item.type)\"\n                label=\"操作\"\n                width=\"60\">\n                <template  slot-scope=\"scope\">\n                  <el-button @click=\"handleDelUser(scope.$index)\" size=\"mini\" type=\"text\">删除</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n        </el-form>\n      </div>\n      <div slot=\"footer\">\n        <el-button size=\"small\" @click=\"kyeDialog.hasDialog = false\">取消</el-button>\n        <el-button type=\"primary\" size=\"small\" @click=\"submitForm('ruleForm')\">保存</el-button>\n      </div>\n    </kye-dialog>\n    <role-detail @is-show-dialog=\"hasDetail = false\" :item=\"item\" :role-types=\"roleTypes\" :has-detail=\"hasDetail\"></role-detail>\n  </div>\n</template>\n\n<script>\n\nimport API from '../../../api'\nimport TopHeader from '../../../components/header'\nimport KyeDialog from '../../../components/dialog'\nimport SystemItem from '../../../components/system'\nimport roleDetail from '../detail'\n\nexport default {\n  components: {\n    TopHeader,\n    KyeDialog,\n    SystemItem,\n    roleDetail\n  },\n  data () {\n    return {\n      filterText: '',\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      // 机构树信息\n      orgs: [],\n      // 关联系统的搜索文本\n      stateSystem: undefined,\n      // 关联用户的搜索文本\n      stateUser: undefined,\n      // 弹框\n      kyeDialog: {\n        hasDialog: false,\n        title: '新增职能角色'\n      },\n      // 是否显示详情\n      hasDetail: false,\n      // 是否显示部门树\n      isShowFilterTree: false,\n      // 所属部门名称\n      departmentName: undefined,\n      // 分页\n      page: {\n        total: 0,\n        size: 10,\n        current: 1,\n        sizes: [10, 20, 50, 100]\n      },\n      // 查询条件\n      filterCondition: {\n        name: undefined, // 角色名称\n        department_name: undefined, // 部门名称\n        status: undefined // 角色状态：1 已启用 2 已禁用\n      },\n      // 角色状态\n      roleStatus: [\n        {\n          id: 1,\n          name: '已启用'\n        }, {\n          id: 2,\n          name: '已禁用'\n        }\n      ],\n      // 角色列表\n      tableData: [],\n      // 角色属性\n      item: {\n        id: undefined,\n        name: undefined, // 角色名称\n        status: undefined, // 角色状态：1 已启用 2 已禁用\n        type: 100, // 1 权限系统管理员 2 角色管理员 3 权限审批员 4 权限申请员 5 系统审计员 100 职能角色 200 部门角色\n        department_id: undefined, // 部门ID\n        department_name: undefined, // 部门名称\n        associated_system: [], // 关联系统\n        associated_user: [] // 关联用户\n      },\n      // 表单验证\n      rules: {\n        name: { required: true, message: '请输入角色名称', trigger: 'change' },\n        status: { required: true, message: '请选择角色状态', trigger: 'change' },\n        department_id: { required: true, message: '请选择所属部门', trigger: 'change' }\n      },\n      w: 0,\n      x: 0,\n      y: 0\n    }\n  },\n  computed: {\n    // 用户信息\n    userInfo () {\n      return this.$store.state.userInfo\n    },\n    // 角色类型\n    roleTypes () {\n      return this.$store.state.roleTypes\n    },\n    // 是否是权限系统管理员\n    isAuthoritySystemRole () {\n      let roles = this.userInfo.role || []\n      return roles.findIndex(el => el.type === 1) !== -1\n    },\n    // 是否是修改状态\n    isEdit () {\n      return this.kyeDialog.hasDialog === 'edit'\n    }\n  },\n  watch: {\n    filterText (val) {\n      this.$refs.tree.filter(val)\n    },\n    hasDetail (val, oldVal) {\n      if (!val) {\n        this.item.name = undefined\n        this.item.status = undefined\n        this.item.type = 100\n        this.item.department_id = undefined\n        this.item.department_name = undefined\n        this.item.associated_system = []\n        this.item.associated_user = []\n      }\n    }\n  },\n  methods: {\n    // 过滤树查询\n    filterNode (value, data) {\n      if (!value || value === this.departmentName) return true\n      // if (!value) return true\n      return data.name.indexOf(value) !== -1\n    },\n    // 是否是内置角色\n    isBuiltInRole (type) {\n      let roles = [1, 2, 3, 4, 5]\n      return roles.indexOf(type) !== -1\n    },\n    // 是否是部门角色\n    isSectionRole (type) {\n      return type === 200\n    },\n    // 查询\n    handleSearch () {\n      this.page.current = 1\n      this.requestList()\n    },\n    // 获取角色列表数据\n    requestList () {\n      let params = {\n        ...this.filterCondition,\n        page: this.page.current,\n        per_page: this.page.size\n      }\n      API.getRoleList(params).then(res => {\n        let result = res.result || {}\n        this.page.total = result.pagination ? result.pagination.total_count : 0\n        this.tableData = result.data || []\n      })\n    },\n    // 获取部门数据\n    requestDepartmentTree () {\n      API.getDepartmentTree().then(res => {\n        this.orgs = res.result || []\n      })\n    },\n    // 新增弹框\n    onAdd () {\n      this.resetForm('ruleForm')\n      this.kyeDialog.title = '新增职能角色'\n      this.isShowDialog('add')\n    },\n    // 详情弹框\n    onDetail (id) {\n      this.hasDetail = true\n      this.getRoleInfo(id)\n    },\n    // 修改弹框\n    onEdit (id) {\n      this.kyeDialog.title = '修改角色'\n      this.isShowDialog('edit')\n      this.getRoleInfo(id)\n    },\n    // 查询角色信息\n    getRoleInfo (id) {\n      API.getRole(id).then(res => {\n        let result = res.result || {}\n        this.item.id = result.id || undefined\n        this.item.name = result.name || undefined\n        this.item.status = result.status || undefined\n        this.item.type = result.type || undefined\n        this.item.department_id = result.department_id || undefined\n        this.item.department_name = result.department_name || undefined\n        this.item.associated_system = result.associated_system || []\n        this.item.associated_user = result.associated_user || []\n        this.departmentName = result.department_name\n        this.filterText = result.department_name\n      })\n    },\n    // 开关弹框\n    isShowDialog (bool) {\n      this.kyeDialog.hasDialog = bool\n      if (!bool) {\n        this.filterText = undefined\n        this.stateUser = undefined\n        this.stateSystem = undefined\n        this.departmentName = undefined\n        this.item.id = undefined\n        this.item.name = undefined\n        this.item.status = undefined\n        this.item.type = 100\n        this.item.department_id = undefined\n        this.item.department_name = undefined\n        this.item.associated_system = []\n        this.item.associated_user = []\n        this.resetForm('ruleForm')\n      } else {\n        if (!this.orgs || this.orgs.length === 0) {\n          this.requestDepartmentTree()\n        }\n      }\n    },\n    // 加载部门树\n    showDepartmentList () {\n      if (this.isEdit) {\n        return false\n      }\n      if (!this.isShowFilterTree) {\n        let { x, y, height, width } = this.$refs.treeParent.getBoundingClientRect()\n        this.x = x\n        this.w = width\n        this.y = y + height\n      }\n      // if (this.filterText === this.departmentName) {\n      //   this.filterText = undefined\n      // }\n      this.isShowFilterTree = true\n    },\n    // 失去焦点\n    onDepartmentBlur () {\n      if (this.departmentName) {\n        this.filterText = this.departmentName\n      }\n    },\n    // 选择所属部门\n    handleNodeClick (node) {\n      if (this.item.department_id !== node.id) {\n        this.item.associated_user = []\n        this.stateUser = undefined\n      }\n      this.departmentName = node.name\n      this.item.department_id = node.id\n      this.filterText = node.name\n      this.isShowFilterTree = false\n    },\n    // 获取每页条数\n    handleSizeChange (size) {\n      this.page.size = size\n      this.requestList()\n    },\n    // 获取当前页\n    handleCurrentChange (index) {\n      this.page.current = index\n      this.requestList()\n    },\n    // 删除角色\n    handleDelRole (id) {\n      this.$confirm('删除角色后将不可恢复，确定删除角色?', '删除角色', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      }).then(() => {\n        API.delRole(id).then(res => {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n          this.requestList()\n        })\n      })\n    },\n    // 删除关联用户\n    handleDelUser (index) {\n      this.item.associated_user.splice(index, 1)\n    },\n    // 删除关联系统\n    handleDelSystem (index) {\n      this.item.associated_system.splice(index, 1)\n    },\n    // 关联系统 - 查询过滤的系统\n    querySystem (queryString, cb) {\n      API.searchSys({ name: queryString, per_page: 10, page: 1 }).then(res => {\n        let result = res.result || {}\n        cb(result.data || [])\n      })\n    },\n    // 关联用户 - 查询过滤的用户\n    queryUser (queryString, cb) {\n      API.getUserList({ name: queryString, department_id: this.item.department_id, per_page: 10, page: 1 }).then(res => {\n        let result = res.result || {}\n        cb(result.data || [])\n      })\n    },\n    // 添加关联系统\n    handleSelectSystem (item) {\n      this.stateSystem = undefined\n      let index = this.item.associated_system.findIndex((el) => {\n        return el.id === item.id\n      })\n      if (index === -1) {\n        this.item.associated_system.push(item)\n      }\n    },\n    // 添加关联用户\n    handleSelectUser (item) {\n      this.stateUser = undefined\n      let index = this.item.associated_user.findIndex((el) => {\n        return el.id === item.id\n      })\n      if (index === -1) {\n        this.item.associated_user.push(item)\n      }\n    },\n    // 提交表单\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let options = {\n            name: this.item.name,\n            status: this.item.status,\n            type: this.item.type,\n            department_id: this.item.department_id,\n            associated_system: this.item.associated_system.map((el) => { return { id: el.id, name: el.name } }),\n            associated_user: this.item.associated_user.map((el) => { return { id: el.id, name: el.name } })\n          }\n          if (!this.isEdit) {\n            API.addRole(options).then(res => {\n              this.$message({\n                type: 'success',\n                message: '新增成功!'\n              })\n              this.isShowDialog()\n              this.requestList()\n            })\n          } else {\n            API.putRole(this.item.id, options).then(res => {\n              this.$message({\n                type: 'success',\n                message: '修改成功!'\n              })\n              this.isShowDialog()\n              this.requestList()\n            })\n          }\n        } else {\n          return false\n        }\n      })\n    },\n    // 重置表单\n    resetForm (formName) {\n      this.$refs[formName] && this.$refs[formName].resetFields && this.$refs[formName].resetFields()\n    },\n    // 关闭部门树\n    onBodyClick (e) {\n      this.isShowFilterTree = false\n    }\n  },\n  beforeMount () {\n    this.requestList()\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/authority/role/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-box\",on:{\"click\":_vm.onBodyClick}},[_c('top-header',{attrs:{\"title\":\"角色管理\"}},[_c('el-button',{staticClass:\"el-icon-plus\",attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":_vm.onAdd}},[_vm._v(\" 新增职能角色\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"page-container\"},[_c('div',{staticClass:\"table-filters\"},[_c('div',{staticClass:\"filter-item\"},[_c('p',{staticClass:\"item\"},[_vm._v(\"角色名称\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"clearable\":\"\",\"size\":\"small\",\"placeholder\":\"请输入\"},model:{value:(_vm.filterCondition.name),callback:function ($$v) {_vm.$set(_vm.filterCondition, \"name\", $$v)},expression:\"filterCondition.name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-item\"},[_c('p',{staticClass:\"item\"},[_vm._v(\"所属部门\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"clearable\":\"\",\"size\":\"small\",\"placeholder\":\"请输入\"},model:{value:(_vm.filterCondition.department_name),callback:function ($$v) {_vm.$set(_vm.filterCondition, \"department_name\", $$v)},expression:\"filterCondition.department_name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-item\"},[_c('p',{staticClass:\"item\"},[_vm._v(\"角色状态\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"size\":\"small\",\"placeholder\":\"请选择\"},model:{value:(_vm.filterCondition.status),callback:function ($$v) {_vm.$set(_vm.filterCondition, \"status\", $$v)},expression:\"filterCondition.status\"}},[_c('el-option',{attrs:{\"label\":\"不限\",\"value\":undefined}}),_vm._v(\" \"),_vm._l((_vm.roleStatus),function(el,key){return _c('el-option',{key:key,attrs:{\"label\":el.name,\"value\":el.id}})})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"search-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"查询\\n        \")])],1)]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s((_vm.page.current - 1) * _vm.page.size + scope.$index + 1)+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"角色名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){_vm.onDetail(scope.row.id)}}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"角色类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(_vm.roleTypes[scope.row.type])+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"角色状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{style:({ color: scope.row.status == '1' ? '#00C353' : '#E96767' })},[_vm._v(\"\\n            \"+_vm._s(scope.row.status == '1' ? '已启用' : '已禁用')+\"\\n          \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"department_name\",\"label\":\"所属部门\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"created_by\",\"label\":\"创建人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updated_by\",\"label\":\"角色修改人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updated_at\",\"label\":\"角色修改时间\",\"width\":\"125\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"datetime\")(scope.row.updated_at))+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.isAuthoritySystemRole || !_vm.isBuiltInRole(scope.row.type))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){_vm.onEdit(scope.row.id)}}},[_vm._v(\"修改\")]):_vm._e(),_vm._v(\" \"),(_vm.isAuthoritySystemRole && scope.row.type === 100)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){_vm.handleDelRole(scope.row.id)}}},[_vm._v(\"删除\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.page.total > _vm.page.sizes[0]),expression:\"page.total > page.sizes[0]\"}],attrs:{\"background\":\"\",\"page-sizes\":_vm.page.sizes,\"layout\":\"sizes,prev,pager,next\",\"current-page\":_vm.page.current,\"total\":_vm.page.total,\"prev-text\":\"上一页\",\"next-text\":\"下一页\"},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.$set(_vm.page, \"current\", $event)}}})],1),_vm._v(\" \"),_c('kye-dialog',{attrs:{\"has-dialog\":!!_vm.kyeDialog.hasDialog,\"title\":_vm.kyeDialog.title},on:{\"is-show-dialog\":_vm.isShowDialog}},[_c('div',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.item,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('div',{staticClass:\"table-filters\"},[_c('div',{staticClass:\"filter-item\"},[_c('p',{staticClass:\"item label-required\"},[_vm._v(\"角色名称\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"name\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"size\":\"small\",\"placeholder\":\"请输入\"},model:{value:(_vm.item.name),callback:function ($$v) {_vm.$set(_vm.item, \"name\", $$v)},expression:\"item.name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"filter-item\"},[_c('p',{staticClass:\"item label-required\"},[_vm._v(\"角色状态\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"status\"}},[_c('el-select',{attrs:{\"disabled\":_vm.isEdit && _vm.isBuiltInRole(_vm.item.type),\"size\":\"small\",\"placeholder\":\"请选择\"},model:{value:(_vm.item.status),callback:function ($$v) {_vm.$set(_vm.item, \"status\", $$v)},expression:\"item.status\"}},_vm._l((_vm.roleStatus),function(el,key){return _c('el-option',{key:key,attrs:{\"label\":el.name,\"value\":el.id}})}))],1)],1),_vm._v(\" \"),(!_vm.isBuiltInRole(_vm.item.type))?_c('div',{staticClass:\"filter-item\",staticStyle:{\"width\":\"410px\"}},[_c('p',{staticClass:\"item label-required\"},[_vm._v(\"所属部门\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"department_id\"}},[_c('div',{staticStyle:{\"position\":\"relative\",\"width\":\"100%\"}},[_c('div',{ref:\"treeParent\",staticClass:\"filter-input-box\",on:{\"click\":function($event){$event.stopPropagation();return (function () { return false })($event)}}},[_c('el-input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"hidden\"},model:{value:(_vm.item.department_id),callback:function ($$v) {_vm.$set(_vm.item, \"department_id\", $$v)},expression:\"item.department_id\"}}),_vm._v(\" \"),_c('el-input',{ref:\"filterInput\",attrs:{\"placeholder\":\"输入关键字进行过滤\",\"size\":\"small\",\"clearable\":!_vm.isEdit,\"readonly\":_vm.isEdit,\"suffix-icon\":_vm.isEdit ? null : 'el-icon-search'},on:{\"focus\":_vm.showDepartmentList,\"blur\":_vm.onDepartmentBlur},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit && _vm.isShowFilterTree),expression:\"!isEdit && isShowFilterTree\"}],staticClass:\"filter-tree-w filter-tree-wrap el-select-dropdown el-popper\",style:({ top: _vm.y + 'px', left: _vm.x + 'px', width: _vm.w + 'px' })},[_c('el-tree',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orgs && _vm.orgs.length > 0),expression:\"orgs && orgs.length > 0\"}],ref:\"tree\",attrs:{\"node-key\":\"id\",\"data\":_vm.orgs,\"expand-on-click-node\":true,\"props\":_vm.defaultProps,\"filter-node-method\":_vm.filterNode,\"highlight-current\":true},on:{\"node-click\":_vm.handleNodeClick}})],1)])])],1):_vm._e()]),_vm._v(\" \"),(!_vm.isEdit || !_vm.isBuiltInRole(_vm.item.type))?_c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"关联系统\")]),_vm._v(\" \"),_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.querySystem,\"placeholder\":\"输入选择即可添加关联系统\",\"trigger-on-focus\":false},on:{\"select\":_vm.handleSelectSystem},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"name text-overflow-ellipsis\"},[_vm._v(_vm._s(item.name))])]}}]),model:{value:(_vm.stateSystem),callback:function ($$v) {_vm.stateSystem=$$v},expression:\"stateSystem\"}})],1):_vm._e(),_vm._v(\" \"),(!_vm.isEdit || !_vm.isBuiltInRole(_vm.item.type))?_c('div',{staticClass:\"system-items\"},_vm._l((_vm.item.associated_system),function(el,index){return _c('system-item',{key:el.id,attrs:{\"showClose\":!_vm.isEdit || !_vm.isBuiltInRole(_vm.item.type),\"item\":el},on:{\"del-click\":function($event){_vm.handleDelSystem(index)}}})})):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!this.item.department_id || _vm.isBuiltInRole(_vm.item.type)),expression:\"!!this.item.department_id || isBuiltInRole(item.type)\"}],staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"关联用户\")]),_vm._v(\" \"),(!_vm.isEdit || !_vm.isSectionRole(_vm.item.type))?_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.queryUser,\"placeholder\":\"输入选择即可添加关联用户\",\"trigger-on-focus\":false},on:{\"select\":_vm.handleSelectUser},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"name text-overflow-ellipsis\",attrs:{\"title\":((item.name) + \"，\" + (item.department_name))}},[_vm._v(_vm._s(((item.name) + \"，\" + (item.department_name))))])]}}]),model:{value:(_vm.stateUser),callback:function ($$v) {_vm.stateUser=$$v},expression:\"stateUser\"}}):_vm._e()],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!this.item.department_id || _vm.isBuiltInRole(_vm.item.type)),expression:\"!!this.item.department_id || isBuiltInRole(item.type)\"}],staticClass:\"dialog-table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.item.associated_user,\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"employee_code\",\"label\":\"工号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}}),_vm._v(\" \"),(!_vm.isEdit || !_vm.isSectionRole(_vm.item.type))?_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){_vm.handleDelUser(scope.$index)}}},[_vm._v(\"删除\")])]}}])}):_vm._e()],1)],1)])],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.kyeDialog.hasDialog = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}},[_vm._v(\"保存\")])],1)]),_vm._v(\" \"),_c('role-detail',{attrs:{\"item\":_vm.item,\"role-types\":_vm.roleTypes,\"has-detail\":_vm.hasDetail},on:{\"is-show-dialog\":function($event){_vm.hasDetail = false}}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-09f3a9de\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/authority/role/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09f3a9de\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/lintaohai/workspace/urm-white/src/assets/style/variable.less\\\"]}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09f3a9de\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-09f3a9de\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/authority/role/index.vue\n// module id = null\n// module chunks = ","<style lang=\"less\" scoped>\n.li-item {\n  margin-bottom: 15px;\n  i {\n    display: inline-block;\n    margin-right: 8px;\n    width: 8px;\n    height: 8px;\n    border-radius: 8px;\n    background-color: #333;\n  }\n  span {\n    display: inline-block;\n    margin-right: 10px;\n    color: #333;\n  }\n}\n.system-items {\n  margin: 12px -10px 0 -10px;\n  &:after {\n    content: \"\";\n    display: block;\n    clear: both;\n    font-size: 0;\n  }\n}\n.system-item {\n  float: left;\n  margin: 0 10px 12px 10px;\n}\n.dialog-table {\n  padding-top: 0;\n}\n.detail-filters {\n  color: #999;\n  line-height: 14px;\n  .el-row {\n    margin-bottom: 16px;\n  }\n  span {\n    margin-left: 10px;\n    color: #333;\n  }\n}\n</style>\n<template>\n  <kye-dialog @is-show-dialog=\"isShowDialog\" :hasDialog=\"hasDetail\" :title=\"title\">\n    <div slot=\"body\">\n      <div class=\"detail-filters\">\n        <el-row>\n          <el-col :span=\"8\">\n            <div>角色名称<span>{{item.name}}</span></div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div>角色类型<span>{{roleTypes[item.type]}}</span></div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div>角色状态<span>{{item.status == '1' ? '已启用' : '已禁用'}}</span></div>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"8\">\n            <div>所属部门<span>{{item.department_name}}</span></div>\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"li-item\">\n        <i></i><span class=\"li-item-title\">关联系统</span>\n      </div>\n      <div class=\"system-items\">\n        <system-item v-for=\"(el, key) in item.associated_system\" :item=\"el\" :key=\"key\"></system-item>\n      </div>\n      <div class=\"li-item\">\n        <i></i><span class=\"li-item-title\">关联用户</span>\n      </div>\n      <div class=\"dialog-table\">\n        <el-table\n          :data=\"item.associated_user\"\n          size=\"mini\"\n          style=\"width: 100%\">\n          <el-table-column\n            type=\"index\"\n            label=\"序号\"\n            width=\"60\">\n          </el-table-column>\n          <el-table-column\n            prop=\"employee_code\"\n            label=\"工号\">\n          </el-table-column>\n          <el-table-column\n            prop=\"name\"\n            label=\"用户名\">\n          </el-table-column>\n          <el-table-column\n            prop=\"department_name\"\n            label=\"所属部门\">\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n    <div slot=\"footer\">\n      <el-button size=\"small\" @click=\"isShowDialog\" type=\"primary\">确定</el-button>\n    </div>\n  </kye-dialog>\n</template>\n<script>\n\nimport KyeDialog from '../../components/dialog'\nimport SystemItem from '../../components/system'\n\nexport default {\n  components: {\n    KyeDialog,\n    SystemItem\n  },\n  data () {\n    return {\n    }\n  },\n  props: {\n    item: {\n      type: Object,\n      required: true\n    },\n    hasDetail: {\n      type: Boolean,\n      required: true\n    },\n    roleTypes: {\n      type: Object,\n      required: true\n    },\n    title: {\n      type: String,\n      default: '角色详情'\n    }\n  },\n  methods: {\n    isShowDialog () {\n      this.$emit('is-show-dialog', false)\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/authority/detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('kye-dialog',{attrs:{\"hasDialog\":_vm.hasDetail,\"title\":_vm.title},on:{\"is-show-dialog\":_vm.isShowDialog}},[_c('div',{attrs:{\"slot\":\"body\"},slot:\"body\"},[_c('div',{staticClass:\"detail-filters\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('div',[_vm._v(\"角色名称\"),_c('span',[_vm._v(_vm._s(_vm.item.name))])])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('div',[_vm._v(\"角色类型\"),_c('span',[_vm._v(_vm._s(_vm.roleTypes[_vm.item.type]))])])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('div',[_vm._v(\"角色状态\"),_c('span',[_vm._v(_vm._s(_vm.item.status == '1' ? '已启用' : '已禁用'))])])])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('div',[_vm._v(\"所属部门\"),_c('span',[_vm._v(_vm._s(_vm.item.department_name))])])])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"关联系统\")])]),_vm._v(\" \"),_c('div',{staticClass:\"system-items\"},_vm._l((_vm.item.associated_system),function(el,key){return _c('system-item',{key:key,attrs:{\"item\":el}})})),_vm._v(\" \"),_c('div',{staticClass:\"li-item\"},[_c('i'),_c('span',{staticClass:\"li-item-title\"},[_vm._v(\"关联用户\")])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.item.associated_user,\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"employee_code\",\"label\":\"工号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"department_name\",\"label\":\"所属部门\"}})],1)],1)]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.isShowDialog}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-67a80b84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/authority/detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-67a80b84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/Users/lintaohai/workspace/urm-white/src/assets/style/variable.less\\\"]}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-67a80b84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-67a80b84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/authority/detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}